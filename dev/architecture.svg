<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="900" viewBox="0 0 1200 900">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="5" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L10,5 L0,10 z" fill="#333" />
    </marker>
    <style type="text/css"><![CDATA[
      .box { fill:#f8f9fa; stroke:#333; stroke-width:1.5px; rx:6; ry:6; }
      .title { font: bold 14px sans-serif; fill:#111 }
      .label { font: 12px sans-serif; fill:#222 }
      .group { fill:none; stroke:#aaa; stroke-dasharray:4 4 }
    ]]></style>
  </defs>

  <!-- Top-level entry -->
  <rect x="420" y="20" width="360" height="56" class="box"/>
  <text x="600" y="55" text-anchor="middle" class="title">main.py / API Server (entry points)</text>

  <!-- Core package container -->
  <rect x="220" y="110" width="760" height="420" fill="#ffffff" stroke="#666" stroke-width="1" rx="8" ry="8"/>
  <text x="600" y="138" text-anchor="middle" class="title">src/algotrendy (core package)</text>

  <!-- Modules inside core package (arranged grid) -->
  <!-- Left column -->
  <rect x="240" y="160" width="220" height="48" class="box"/>
  <text x="350" y="190" text-anchor="middle" class="label">config</text>

  <rect x="240" y="220" width="220" height="48" class="box"/>
  <text x="350" y="252" text-anchor="middle" class="label">data_adapter</text>

  <rect x="240" y="280" width="220" height="48" class="box"/>
  <text x="350" y="312" text-anchor="middle" class="label">data_manager</text>

  <rect x="240" y="340" width="220" height="48" class="box"/>
  <text x="350" y="372" text-anchor="middle" class="label">models / trainers</text>

  <rect x="240" y="400" width="220" height="48" class="box"/>
  <text x="350" y="432" text-anchor="middle" class="label">backtester</text>

  <!-- Right column -->
  <rect x="740" y="160" width="220" height="48" class="box"/>
  <text x="850" y="190" text-anchor="middle" class="label">ai agents</text>

  <rect x="740" y="220" width="220" height="48" class="box"/>
  <text x="850" y="252" text-anchor="middle" class="label">market_replay</text>

  <rect x="740" y="280" width="220" height="48" class="box"/>
  <text x="850" y="312" text-anchor="middle" class="label">futures_contract_rolling</text>

  <rect x="740" y="340" width="220" height="48" class="box"/>
  <text x="850" y="372" text-anchor="middle" class="label">quantconnect_integration</text>

  <rect x="740" y="400" width="220" height="48" class="box"/>
  <text x="850" y="432" text-anchor="middle" class="label">feature_analysis</text>

  <!-- Utility box -->
  <rect x="480" y="480" width="240" height="56" class="box"/>
  <text x="600" y="515" text-anchor="middle" class="label">utils / persistence / logging</text>

  <!-- Arrows -->
  <!-- main -> package -->
  <line x1="600" y1="76" x2="600" y2="110" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />

  <!-- package -> modules (representational arrows from package title) -->
  <line x1="600" y1="150" x2="350" y2="160" stroke="#555" stroke-width="1.5" marker-end="url(#arrow)" />
  <line x1="600" y1="150" x2="850" y2="160" stroke="#555" stroke-width="1.5" marker-end="url(#arrow)" />

  <!-- internal dependencies -->
  <line x1="350" y1="248" x2="350" y2="280" stroke="#888" stroke-width="1.2" marker-end="url(#arrow)" />
  <text x="320" y="266" class="label">uses</text>

  <line x1="350" y1="296" x2="600" y2="352" stroke="#888" stroke-width="1.2" marker-end="url(#arrow)" />
  <text x="470" y="328" class="label">feeds</text>

  <line x1="350" y1="364" x2="600" y2="352" stroke="#888" stroke-width="1.2" marker-end="url(#arrow)" />
  <text x="470" y="372" class="label">models ↔ backtester</text>

  <line x1="850" y1="368" x2="850" y2="340" stroke="#888" stroke-width="1.2" marker-end="url(#arrow)" />
  <text x="880" y="354" class="label">ai → quantconnect</text>

  <line x1="850" y1="384" x2="350" y2="232" stroke="#888" stroke-width="1.2" marker-end="url(#arrow)" />
  <text x="600" y="300" class="label">quantconnect ↔ data_adapter</text>

  <line x1="600" y1="512" x2="600" y2="456" stroke="#888" stroke-width="1.2" marker-end="url(#arrow)" />
  <text x="630" y="488" class="label">shared utils</text>

  <!-- Frontend / Examples / Tests -->
  <rect x="40" y="620" width="300" height="56" class="box"/>
  <text x="190" y="655" text-anchor="middle" class="label">frontend/spa (React + Vite)</text>
  <text x="190" y="673" text-anchor="middle" class="label">Portfolio UI - talks to API</text>

  <rect x="440" y="620" width="300" height="56" class="box"/>
  <text x="590" y="655" text-anchor="middle" class="label">examples/ (scripts)</text>
  <text x="590" y="673" text-anchor="middle" class="label">xgboost_trader, demos</text>

  <rect x="840" y="620" width="300" height="56" class="box"/>
  <text x="990" y="655" text-anchor="middle" class="label">tests / isolated_tests</text>
  <text x="990" y="673" text-anchor="middle" class="label">pytest smoke tests</text>

  <!-- Connections -->
  <line x1="190" y1="460" x2="190" y2="620" stroke="#333" stroke-width="1.2" marker-end="url(#arrow)" />
  <line x1="600" y1="530" x2="600" y2="620" stroke="#333" stroke-width="1.2" marker-end="url(#arrow)" />
  <line x1="1010" y1="460" x2="990" y2="620" stroke="#333" stroke-width="1.2" marker-end="url(#arrow)" />

  <!-- Legend -->
  <rect x="20" y="20" width="180" height="72" fill="#fff" stroke="#ccc" rx="6" ry="6"/>
  <text x="30" y="40" class="label">Legend:</text>
  <text x="30" y="58" class="label">Box = module / component</text>
  <text x="30" y="74" class="label">Arrow = uses / imports / calls</text>

</svg>